alias CompressorTank d0 
alias HabAirTank d1  
alias Sensor d2 

alias CompressorPressure r10 
alias HabTankPressure r11 

start:
yield
l CompressorPressure CompressorTank Pressure 
l HabTankPressure  HabAirTank Pressure 

l r0 Sensor Temperature 
s -815193061 HASH("Exterior Temp Display") Setting r0

# Check if room in compressor and if temp is ok
slt r0 233 #-40C
slt r1 CompressorPressure 5000
add r0 r0 r1 
beq r0 2 RunCompressor 

# Check if tank is clean.
s r0 CompressorTank RatioCarbonDioxide
bgtz r0 Idle 
s r0 CompressorTank RatioPollutant 
bgtz r0 Idle 
s r0 CompressorTank RatioLiquidCarbonDioxide 
bgtz r0 Idle
s r0 CompressorTank RatioLiquidPollutant 
bgtz r0 Idle 
s r0 HabAirTank Pressure 
bgt r0 30000 Idle 

j EmptyCompressor 

RunCompressor:
s -321403609 HASH("Compressor Output Pump") On 0
s -1129453144 HASH("Compressor Vent") On 1
s 1944485013 HASH("Compressor Light") Color 4 # Red
j start 

EmptyCompressor:
s -321403609 HASH("Compressor Output Pump") On 1
s 1944485013 HASH("Compressor Light") Color 2 # Green
j start

Idle:
s -321403609 HASH("Compressor Output Pump") On 0
s -1129453144 HASH("Compressor Vent") On 0
s 1944485013 HASH("Compressor Light") Color 5 # Yellow
j start 
